import{j as x,r as b,R as W}from"./react-0bfda011.js";import{c as V}from"./react-dom-04471a10.js";import{I as A,T as J,F as q}from"./react-icons-ad1a0d2e.js";import{u as C,a as D,P as G}from"./react-redux-da320f2e.js";import{Q as E}from"./react-toastify-5f669e26.js";import{c as O,a as H,b as K}from"./@reduxjs-289c7799.js";import{a as $}from"./axios-aba6f0e0.js";import{a as j,N as Q,d as k,e as S}from"./react-router-ed63dfb7.js";import"./hoist-non-react-statics-b24a8e72.js";import"./react-is-1aacdabe.js";import{L as w,B as z}from"./react-router-dom-4248cb61.js";import"./scheduler-04ce0582.js";import"./use-sync-external-store-da90c88d.js";import"./clsx-1229b3e0.js";import"./immer-b106be54.js";import"./redux-17d3a502.js";import"./@babel-1a7d35ad.js";import"./redux-thunk-ef899f4c.js";import"./@remix-run-35d41228.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function s(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(t){if(t.ep)return;t.ep=!0;const a=s(t);fetch(t.href,a)}})();const h=x.Fragment,e=x.jsx,n=x.jsxs,U=()=>e("div",{children:"Component"}),X=()=>n("div",{className:"text-2xl font-bold",children:["Landing Page",e(U,{})]}),Y=async o=>{const r=await $.post("signup",o);return r.data&&localStorage.setItem("user",JSON.stringify(r.data)),r.data},Z=async o=>{const r=await $.post("login",o);return r.data&&localStorage.setItem("user",JSON.stringify(r.data)),r.data},_=()=>{localStorage.removeItem("user")},P={register:Y,logout:_,login:Z},F=JSON.parse(localStorage.getItem("user")),ee={user:F||null,isError:!1,isSuccess:!1,isLoading:!1,message:""},v=O("auth/register",async(o,r)=>{try{return await P.register(o)}catch(s){const i=s.response&&s.response.data&&s.response.data.message||s.message||s.toString();return r.rejectWithValue(i)}}),L=O("auth/login",async(o,r)=>{try{return await P.login(o)}catch(s){const i=s.response&&s.response.data&&s.response.data.message||s.message||s.toString();return r.rejectWithValue(i)}}),B=O("auth/logout",async()=>{await P.logout()}),M=H({name:"auth",initialState:ee,reducers:{reset:o=>{o.isLoading=!1,o.isSuccess=!1,o.isError=!1,o.message=""}},extraReducers:o=>{o.addCase(v.pending,r=>{r.isLoading=!0}).addCase(v.fulfilled,(r,s)=>{r.isLoading=!1,r.isSuccess=!0,r.user=s.payload}).addCase(v.rejected,(r,s)=>{r.isLoading=!1,r.isError=!0,r.message=s.payload,r.user=null}).addCase(L.pending,r=>{r.isLoading=!0}).addCase(L.fulfilled,(r,s)=>{r.isLoading=!1,r.isSuccess=!0,r.user=s.payload}).addCase(L.rejected,(r,s)=>{r.isLoading=!1,r.isError=!0,r.message=s.payload,r.user=null}).addCase(B.fulfilled,r=>{r.user=null})}}),{reset:R}=M.actions,re=M.reducer;function T(){return e("div",{className:"loadingSpinnerContainer",children:e("div",{className:"loadingSpinner"})})}function se(){const[o,r]=b.useState({email:"",password:""}),{email:s,password:i}=o,t=j(),a=C(),{user:l,isLoading:u,isError:m,isSuccess:f,message:p}=D(c=>c.auth);b.useEffect(()=>{m&&E.error(p),(f||l)&&t("/dashboard"),a(R())},[l,m,f,p,t,a]);const g=c=>{r(N=>({...N,[c.target.name]:c.target.value}))},y=c=>{c.preventDefault(),a(L({email:s,password:i}))};return u?e(T,{}):n(h,{children:[n("section",{children:[n("h1",{children:[e(A,{})," Login"]}),e("p",{children:"Please login to your account"})]}),e("section",{className:"form",children:n("form",{onSubmit:y,children:[e("div",{className:"form-group",children:e("input",{type:"email",className:"form-control",id:"email",name:"email",value:s,placeholder:"Enter your email here",onChange:g})}),e("div",{className:"form-group",children:e("input",{type:"password",className:"form-control",id:"password",name:"password",value:i,placeholder:"Enter your password here",onChange:g})}),e("div",{className:"form-group",children:e("button",{type:"submit",className:"btn btn-block",children:"Submit"})})]})})]})}function te(){const[o,r]=b.useState({userName:"",email:"",password:"",password2:""}),{userName:s,email:i,password:t,password2:a}=o,l=j(),u=C(),{user:m,isLoading:f,isError:p,isSuccess:g,message:y}=D(d=>d.auth);b.useEffect(()=>{p&&E.error(y),(g||m)&&l("/dashboard"),u(R())},[m,p,g,y,l,u]);const c=d=>{r(I=>({...I,[d.target.name]:d.target.value}))},N=d=>{d.preventDefault(),t!==a?E.error("Passwords do not match!"):u(v({userName:s,email:i,password:t}))};return f?e(T,{}):n(h,{children:[n("section",{children:[n("h1",{children:[e(J,{})," Sign up"]}),e("p",{children:"Please create your account"})]}),e("section",{className:"form",children:n("form",{onSubmit:N,children:[e("div",{className:"form-group",children:e("input",{type:"text",className:"form-control",id:"name",name:"userName",value:s,placeholder:"Enter your name here",onChange:c})}),e("div",{className:"form-group",children:e("input",{type:"email",className:"form-control",id:"email",name:"email",value:i,placeholder:"Enter your email here",onChange:c})}),e("div",{className:"form-group",children:e("input",{type:"password",className:"form-control",id:"password",name:"password",value:t,placeholder:"Enter your password here",onChange:c})}),e("div",{className:"form-group",children:e("input",{type:"password",className:"form-control",id:"password2",name:"password2",value:a,placeholder:"Confirm password here",onChange:c})}),e("div",{className:"form-group",children:e("button",{type:"submit",className:"btn btn-block",children:"Submit"})})]})})]})}function oe(){return e(h,{children:e("h1",{children:"Dashboard"})})}function ae(){const o=j(),r=C(),{user:s}=D(t=>t.auth);return n("header",{className:"header",children:[e("div",{className:"logo",children:e(w,{to:"/",children:"LOGO"})}),e("ul",{children:s?e("li",{children:n("button",{className:"btn",onClick:()=>{r(B()),r(R()),o("/")},children:[e(q,{}),"Logout"]})}):n(h,{children:[e("li",{children:n(w,{to:"/login",children:[e(A,{}),"Login"]})}),e("li",{children:n(w,{to:"/register",children:[e(J,{}),"Sign up"]})})]})})]})}const ne=JSON.parse(localStorage.getItem("user")),ie=({children:o})=>ne?o:e(Q,{to:"/"});function ce(){return e(h,{children:n(z,{children:[e("div",{className:"flex justify-center items-center py-8",children:e(ae,{})}),e("div",{className:"container",children:n(k,{children:[e(S,{path:"/",element:e(X,{})}),e(S,{path:"/login",element:e(se,{})}),e(S,{path:"/register",element:e(te,{})}),e(S,{path:"/dashboard",element:e(ie,{children:e(oe,{})})})]})})]})})}const le=K({reducer:{auth:re}});V.createRoot(document.getElementById("root")).render(e(W.StrictMode,{children:e(G,{store:le,children:e(ce,{})})}));
